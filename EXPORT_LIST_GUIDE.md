# エクスポート対象コンテナリストガイド

## 概要

エクスポート対象のコンテナをテキストファイルで管理できるようになりました。

## ファイルの場所

エクスポート対象リストファイルは以下の場所に配置されます：

```
%APPDATA%\container-browser\export-container-list.txt
```

通常のパス:
```
C:\Users\<ユーザー名>\AppData\Roaming\container-browser\export-container-list.txt
```

## ファイル形式

### 基本的な形式

1行に1つのコンテナIDまたは名前を記述します。

```
container-id-1
container-id-2
My Container Name
```

### コメント

行頭に `#` がある行はコメントとして無視されます。

```
# これはコメントです
container-id-1
# この行もコメントです
container-id-2
```

### 空行

空行は無視されます。

```
container-id-1

container-id-2
```

## 使用方法

### 1. ファイルを作成/編集

1. `%APPDATA%\container-browser\export-container-list.txt` を開く（存在しない場合は作成）
2. エクスポートしたいコンテナのIDまたは名前を1行に1つずつ記述
3. ファイルを保存

### 2. コンテナIDまたは名前の取得方法

#### 開発者ツール（F12）のコンソールから取得

```javascript
// 全コンテナを取得
const allContainers = await window.containersAPI?.list?.() || [];

// コンテナIDと名前を表示
allContainers.forEach(c => {
  console.log(`ID: ${c.id}, Name: ${c.name}`);
});

// リスト形式で出力（コピー&ペースト用）
console.log('--- コンテナリスト（コピー用） ---');
allContainers.forEach(c => {
  console.log(c.id); // または c.name
});
```

### 3. エクスポート実行

通常通りエクスポートを実行すると、リストに含まれるコンテナのみがエクスポートされます。

```javascript
// エクスポート実行
const exportResult = await window.migrationAPI.exportComplete({ includeProfiles: true });
```

## 動作

### ファイルが存在する場合

- リストに含まれるコンテナのみがエクスポート対象になります
- リストに含まれないコンテナは除外されます
- Bannedグループのコンテナも除外されます（リストに含まれていても）

### ファイルが存在しない場合

- 従来通り、全コンテナ（Bannedグループを除く）がエクスポート対象になります

### ファイルが空の場合

- エクスポート対象が0件になります

## 例

### 例1: コンテナIDで指定

```
942be119-e3e6-4112-903b-111f4a2c88da
6cb7bb29-0d43-4d3e-8575-a4aee3313d5e
a1b2c3d4-e5f6-7890-abcd-ef1234567890
```

### 例2: コンテナ名で指定

```
My Container
Test Container
Production Container
```

### 例3: IDと名前の混在

```
942be119-e3e6-4112-903b-111f4a2c88da
My Container
6cb7bb29-0d43-4d3e-8575-a4aee3313d5e
```

### 例4: コメント付き

```
# 重要なコンテナ
942be119-e3e6-4112-903b-111f4a2c88da
6cb7bb29-0d43-4d3e-8575-a4aee3313d5e

# テスト用コンテナ
Test Container 1
Test Container 2
```

## 進捗表示

エクスポート開始時に、リストの読み込み状況が表示されます：

```
エクスポート対象リストから 10件のエントリを読み込みました
エクスポート対象: 8件のコンテナ
```

（リストに含まれていても、Bannedグループや存在しないコンテナは除外されます）

## トラブルシューティング

### 問題1: リストに含まれているのにエクスポートされない

**確認事項:**
- コンテナIDまたは名前が正確か
- 大文字小文字が一致しているか（名前の場合）
- コンテナがBannedグループに含まれていないか

**対処:**
- 開発者ツールのコンソールでコンテナIDと名前を確認
- リストファイルの内容を確認

### 問題2: ファイルが見つからない

**確認事項:**
- ファイルパスが正しいか
- ファイル名が `export-container-list.txt` か

**対処:**
- ファイルを正しい場所に作成
- ファイル名を確認

### 問題3: 全コンテナがエクスポートされる

**原因:**
- ファイルが存在しない
- ファイルが空

**対処:**
- ファイルが存在するか確認
- ファイルにコンテナIDまたは名前を記述

## 注意事項

1. **Bannedグループの優先**
   - リストに含まれていても、Bannedグループのコンテナは除外されます

2. **名前の大文字小文字**
   - コンテナ名で指定する場合、大文字小文字は区別されません（小文字に変換して比較）

3. **存在しないコンテナ**
   - リストに存在しないコンテナIDまたは名前が含まれている場合、その行は無視されます

4. **ファイルの更新**
   - エクスポート実行時にファイルを読み込むため、エクスポート前にファイルを更新してください

## 関連ドキュメント

- `EXPORT_GUIDE.md` - エクスポート手順
- `EXPORT_PROGRESS_GUIDE.md` - 進捗表示ガイド

